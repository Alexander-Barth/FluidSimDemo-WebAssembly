<!DOCTYPE html>
<html>
  <head>
    <title>Fluid Simulation using Julia compiled to WASM</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <style>
    body {
      font-family: Sans-Serif;
    }

    form {
      display: table;
      border-spacing: 5px;
    }

    form>div {
      display: table-row;
    }

    label {
      display: table-cell;
      text-align: right;
    }
  </style>
  <body>
    <script type="module">
      import { run } from './model_loader.js';
      run(document);
    </script>

    <h3>2D shallow water equations implemented in Julia and compiled to WASM.</h3>
    <div><canvas id="plot" width="1000" height="300" /></div>
    <p>The surface elevation as governed by the 2D shallow water equations. The area represents a water body of <span id="xmax"></span> km x <span id="ymax"></span> km with a constant depth of <span id="zmax"></span> m. Use the mouse to change and add obstacles in the flow field.</p>

    <form>
      <div>
        <label for="pen_size">Pen size</label>
        <input type="number" id="pen_size" value="10" step="1" min="1">
      </div>
      <div>
        <label for="erase">Erase mode</label>
        <input type="checkbox" id="erase" value="erase">
      </div>
      <div>
        <label for="grav">gravity (m/s²)</label><input id="grav" type="number" value="9.81" step="0.1" min="0">
      </div>
      <div>
        <label for="f">Coriolis f₀ parameter (s⁻¹)</label><input id="f" type="number" value="0" step="0.0001">
      </div>
      <div>
        <label for="beta">Coriolis β parameter (s⁻¹ m⁻¹)</label><input id="beta" type="number" value="0" step="0.0001">
      </div>
      <div>
        <label for="dt">Time step (s)</label><input id="dt" type="number" value="100" step="1">
      </div>
    </div>

    <div>
      <label for="hmin">Minimum elevation (m)</label><input id="hmin" type="number" value="-0.25" step="0.01">
    </div>
    <div>
      <label for="hmax">Maximum elevation (m)</label><input id="hmax" type="number" value="0.25" step="0.01">
    </div>
    <div>
      <label for="colormap">Colormap</label>
      <select id="colormap">
        <option value="turbo">turbo</option>
        <option value="viridis">viridis</option>
      </select>
    </div>
    <div>
      <label for="velocity_show">Show velocity</label>
      <input type="checkbox" id="velocity_show" value="velocity_show">
    </div>

    </form>
<p>Things to try:
  <ul>
    <li>Draw some shapes</li>
    <li>Increase time step (when the model becomes unstable, you need to reload the page to restart the simulation)</li>
    <li>Change the acceleration due to gravity</li>
    <li>Use a negative time-step</li>
    <li>Note that the model can become unstable of the once the <a href="https://en.wikipedia.org/wiki/Courant%E2%80%93Friedrichs%E2%80%93Lewy_condition">CFL conditions</a> are not satisfied.</li>
    <li>A typical value of the Coriolis parameter on Earth is 0.0001 s⁻¹.
    </ul>
</p>
    <p>More information and the code is <a href="https://github.com/Alexander-Barth/FluidSimDemo-WebAssembly">available here</a>.</p>
  </body>
</html>

<!--  LocalWords:  WASM px CFL
 -->
